<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.4" />
<title>vcd.draw API documentation</title>
<meta name="description" content="VCD (Video Content Description) library v4.2.0 â€¦" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>vcd.draw</code></h1>
</header>
<section id="section-intro">
<p>VCD (Video Content Description) library v4.2.0</p>
<p>Project website: <a href="http://vcd.vicomtech.org">http://vcd.vicomtech.org</a></p>
<p>Copyright (C) 2020, Vicomtech (<a href="http://www.vicomtech.es/">http://www.vicomtech.es/</a>),
(Spain) all rights reserved.</p>
<p>VCD is a Python library to create and manage VCD content version 4.2.0.
VCD is distributed under MIT License. See LICENSE.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
VCD (Video Content Description) library v4.2.0

Project website: http://vcd.vicomtech.org

Copyright (C) 2020, Vicomtech (http://www.vicomtech.es/),
(Spain) all rights reserved.

VCD is a Python library to create and manage VCD content version 4.2.0.
VCD is distributed under MIT License. See LICENSE.

&#34;&#34;&#34;



import sys
sys.path.insert(0, &#34;.&#34;)
from random import seed
from random import randint
import vcd.core as core
import vcd.types as types
import vcd.utils as utils
import numpy as np
import cv2 as cv
import warnings


class TopView:
    class Params:
        &#39;&#39;&#39;
        Assuming cuboids are drawn top view, so Z coordinate is ignored
        RZ is the rotation in Z-axis, it assumes/enforces SY&gt;SX, thus keeping
        RZ between pi/2 and -pi/2

        Z, RX, RY, and SZ are ignored

        For Vehicle cases, we adopt ISO8855: origin at rear axle at ground, x-to-front, y-to-left
        &#39;&#39;&#39;

        def __init__(self, _imgSize=None, _rangeX=None, _rangeY=None, _colorMap=None):
            self.imgSize = (1920, 1080)  # width, height
            if _imgSize is not None:
                assert (isinstance(_imgSize, tuple))
                self.imgSize = _imgSize

            self.ar = self.imgSize[0] / self.imgSize[1]

            self.rangeX = (-80.0, 80.0)
            if _rangeX is not None:
                assert (isinstance(_rangeX, tuple))
                self.rangeX = _rangeX

            self.rangeY = (self.rangeX[0] / self.ar, self.rangeX[1] / self.ar)
            if _rangeY is not None:
                assert (isinstance(_rangeX, tuple))
                self.rangeY = _rangeY

            self.scaleX = self.imgSize[0] / (self.rangeX[1] - self.rangeX[0])
            self.scaleY = -self.imgSize[1] / (self.rangeY[1] - self.rangeY[0])

            self.offsetX = round(-self.rangeX[0] * self.scaleX)
            self.offsetY = round(-self.rangeY[1] * self.scaleY)

            self.stepX = 1.0
            self.stepY = 1.0

            self.gridLinesThickness = 1
            self.backgroundColor = 255
            self.gridTextColor = (0, 0, 0)

            if _colorMap is None:
                self.colorMap = dict()
            else:
                assert (isinstance(_colorMap, dict))
                self.colorMap = _colorMap

    def __init__(self, vcd):
        assert(isinstance(vcd, core.VCD))
        self.vcd = vcd
        self.params = TopView.Params()

    def draw(self, frameNum, uid=None, _drawTrajectory=True, _params=None):
        self.topView = None
        if _params is not None:
            assert(isinstance(_params, TopView.Params))
            self.params = _params

        # Base
        self.topView = np.zeros((_params.imgSize[1], _params.imgSize[0], 3), np.uint8)  # Needs to be here
        self.drawTopViewBase(self.topView, self.params)

        # Draw objects
        self.drawObjectsAtFrame(self.topView, self.vcd, uid, frameNum, _drawTrajectory, _params)

        # Draw frame info
        cv.putText(self.topView, &#34;Frame: &#34; + str(frameNum),
                   (_params.imgSize[0] - 100, _params.imgSize[1] - 20),
                   cv.FONT_HERSHEY_PLAIN, 1.0, (0,0,0), 1, cv.LINE_AA)

        return self.topView

    def drawEgoCar(self, _topView, size, wheelbase):
        cuboid = [wheelbase/2, 0, 0, 0, 0, 0, size[0], size[1], size[2]]
        self.drawCuboidTopView(_topView, cuboid, &#34;&#34;, (0, 0, 0), 3)
        self.drawCuboidTopView(_topView, cuboid, &#34;&#34;, (127, 127, 127), 2)

    def drawTopViewBase(self, _topView, _params):

        _topView.fill(_params.backgroundColor)

        # Grid x (1/2)
        for x in np.arange(_params.rangeX[0], _params.rangeX[1] + _params.stepX, _params.stepX):
            x_round = round(x)
            ptImg1 = self.point2Pixel((x_round, _params.rangeY[0]))
            ptImg2 = self.point2Pixel((x_round, _params.rangeY[1]))
            cv.line(_topView, ptImg1, ptImg2, (127, 127, 127), _params.gridLinesThickness)

        # Grid y (1/2)
        for y in np.arange(_params.rangeY[0], _params.rangeY[1] + _params.stepY, _params.stepY):
            y_round = round(y)
            ptImg1 = self.point2Pixel((_params.rangeX[0], y_round))
            ptImg2 = self.point2Pixel((_params.rangeX[1], y_round))
            cv.line(_topView, ptImg1, ptImg2, (127, 127, 127), _params.gridLinesThickness)

        # Grid x (2/2)
        for x in np.arange(_params.rangeX[0], _params.rangeX[1] + _params.stepX, _params.stepX):
            x_round = round(x)
            ptImg1 = self.point2Pixel((x_round, _params.rangeY[0]))
            cv.putText(_topView, str(round(x)) + &#34; m&#34;, (ptImg1[0] + 5, 15), cv.FONT_HERSHEY_PLAIN,
                       0.6, _params.gridTextColor, 1, cv.LINE_AA)
        # Grid y (2/2)
        for y in np.arange(_params.rangeY[0], _params.rangeY[1] + _params.stepY, _params.stepY):
            y_round = round(y)
            ptImg1 = self.point2Pixel((_params.rangeX[0], y_round))
            cv.putText(_topView, str(round(y)) + &#34; m&#34;, (5, ptImg1[1] - 5),
                       cv.FONT_HERSHEY_PLAIN,
                       0.6, _params.gridTextColor, 1, cv.LINE_AA)

        # World origin
        cv.circle(_topView, self.point2Pixel((0.0, 0.0)), 4, (255, 255, 255), -1)
        cv.line(_topView, self.point2Pixel((0.0, 0.0)), self.point2Pixel((5.0, 0.0)), (0, 0, 255), 2)
        cv.line(_topView, self.point2Pixel((0.0, 0.0)), self.point2Pixel((0.0, 5.0)), (0, 255, 0), 2)

        cv.putText(_topView, &#34;X&#34;, self.point2Pixel((5.0, -0.5)), cv.FONT_HERSHEY_PLAIN, 1.0, (0, 0, 255), 1, cv.LINE_AA)
        cv.putText(_topView, &#34;Y&#34;, self.point2Pixel((-1.0, 5.0)), cv.FONT_HERSHEY_PLAIN, 1.0, (0, 255, 0), 1, cv.LINE_AA)

    def drawCuboidTopView(self, _img, _cuboid, _class, _color, _thick, _ID=&#34;&#34;):
        assert(isinstance(_cuboid, list))
        assert(len(_cuboid) == 9)  # (X, Y, Z, RX, RY, RZ, SX, SY, SZ)

        locX = _cuboid[0]
        locY = _cuboid[1]
        rotZ_rad = _cuboid[5]
        #if rotZ_rad &gt; np.pi/2 or rotZ_rad &lt; -np.pi/2:
            # Can&#39;t paint this cuboid (this condition enforces sy&gt;sx)
        #    return
        rotZ_deg = rotZ_rad * 180 / np.pi
        sizeX = _cuboid[6]
        sizeY = _cuboid[7]

        center = (locX, locY)
        size = (sizeX, sizeY)

        center_pix = self.point2Pixel(center)
        size_pix = self.size2Pixel(size)

        rrect = (center_pix, size_pix, rotZ_deg)
        box = cv.boxPoints(rrect)
        box = np.int0(box)

        cv.drawContours(_img, [box], 0, _color, _thick)

    def drawObjectsAtFrame(self, _img, _vcd, uid, _frameNum, _drawTrajectory, _params):
        assert(isinstance(_vcd, core.VCD))

        # Explore objects at VCD
        vcd_frame = _vcd.get_frame(_frameNum)
        if &#39;objects&#39; in vcd_frame:
            for object_id, object in vcd_frame[&#39;objects&#39;].items():
                if uid is not None:
                    if object_id != uid:
                        continue
                # Get object static info
                name = _vcd.get_object(object_id)[&#39;name&#39;]
                object_class = _vcd.get_object(object_id)[&#39;type&#39;]

                # Colors
                if self.params.colorMap.get(object_class) is None:
                    # Let&#39;s create a new entry for this class
                    self.params.colorMap[object_class] = (randint(0, 255), randint(0, 255), randint(0, 255))

                # Get current value at this frame
                hasCuboid = False
                if &#34;object_data&#34; in object:
                    for object_data_key in object[&#39;object_data&#39;].keys():
                        for object_data_item in object[&#39;object_data&#39;][object_data_key]:
                            if object_data_key == &#34;cuboid&#34;:
                                hasCuboid = True
                                cuboid = object_data_item[&#39;val&#39;]
                                self.drawCuboidTopView(_img,
                                                       cuboid,
                                                       object_class,
                                                       self.params.colorMap[object_class],
                                                       2,
                                                       object_id)

                if _drawTrajectory and hasCuboid:
                    fis = _vcd.get_frame_intervals_of_element(core.ElementType.object, object_id)
                    for fi in fis:
                        prev_center = dict()
                        for f in range(fi[&#39;frame_start&#39;], _frameNum + 1):
                            vcd_other_frame = _vcd.get_frame(f)
                            if &#39;objects&#39; in vcd_other_frame:
                                for object_id_this, object in vcd_other_frame[&#39;objects&#39;].items():
                                    if object_id_this is not object_id:
                                        continue

                                    # Get value at this frame
                                    if &#34;object_data&#34; in object:
                                        for object_data_key in object[&#39;object_data&#39;].keys():
                                            for object_data_item in object[&#39;object_data&#39;][object_data_key]:
                                                if object_data_key == &#34;cuboid&#34;:
                                                    cuboid = object_data_item[&#39;val&#39;]
                                                    name = object_data_item[&#39;name&#39;]

                                                    center = (cuboid[0], cuboid[1])
                                                    center_pix = self.point2Pixel(center)

                                                    # this is a dict to allow multiple trajectories
                                                    # (e.g. several cuboids per object)
                                                    if prev_center.get(name) is not None:
                                                        cv.line(_img, prev_center[name], center_pix, (0,0,0),
                                                                1, cv.LINE_AA)

                                                    cv.circle(_img, center_pix, 2,
                                                                  self.params.colorMap[object_class], -1)

                                                    prev_center[name] = center_pix

    def size2Pixel(self, _size):
        return (int(round(_size[0] * abs(self.params.scaleX))),
                int(round(_size[1] * abs(self.params.scaleY))))

    def point2Pixel(self, _point):
        pixel = (int(round(_point[0]*self.params.scaleX + self.params.offsetX)),
                 int(round(_point[1]*self.params.scaleY + self.params.offsetY)))
        return pixel

class Image:
    class Params:
        def __init__(self, _colorMap=None):
            if _colorMap is None:
                self.colorMap = dict()
            else:
                assert (isinstance(_colorMap, dict))
                self.colorMap = _colorMap

    def __init__(self, vcd):
        assert (isinstance(vcd, core.VCD))
        self.vcd = vcd
        self.params = Image.Params()

    def draw_bbox(self, _img, _bbox, _object_class, _color):
        pt1 = (int(round(_bbox[0])), int(round(_bbox[1])))
        pt2 = (int(round(_bbox[0] + _bbox[2])), int(round(_bbox[1] + _bbox[3])))

        pta = (pt1[0], pt1[1] - 15)
        ptb = (pt2[0], pt1[1])

        cv.rectangle(_img, pta, ptb, _color, 2)
        cv.rectangle(_img, pta, ptb, _color, -1)
        cv.putText(_img, _object_class, (pta[0], pta[1] + 10), cv.FONT_HERSHEY_PLAIN, 0.6, (0,0,0), 1, cv.LINE_AA)
        cv.rectangle(_img, pt1, pt2, _color, 2)

    def draw(self, _img, _frameNum, _params=None):
        if _params is not None:
            assert(isinstance(_params, Image.Params))
            self.params = _params

        # Explore objects at VCD
        vcd_frame = self.vcd.get_frame(_frameNum)
        if &#39;objects&#39; in vcd_frame:
            for object_id, object in vcd_frame[&#39;objects&#39;].items():
                # Get object static info
                name = self.vcd.get_object(object_id)[&#39;name&#39;]
                object_class = self.vcd.get_object(object_id)[&#39;type&#39;]

                # Colors
                if self.params.colorMap.get(object_class) is None:
                    # Let&#39;s create a new entry for this class
                    self.params.colorMap[object_class] = (randint(0, 255), randint(0, 255), randint(0, 255))

                # Get current value at this frame
                if &#34;object_data&#34; in object:
                    for object_data_key in object[&#39;object_data&#39;].keys():
                        for object_data_item in object[&#39;object_data&#39;][object_data_key]:
                            if object_data_key == &#34;bbox&#34;:
                                bbox = object_data_item[&#39;val&#39;]
                                self.draw_bbox(_img, bbox, object_class, self.params.colorMap[object_class])


class TextDrawer:
    def __init__(self):
        pass

    def draw(self, _str, cols=600, rows=1200):
        img = np.zeros((rows, cols, 3), np.uint8)
        count = 0

        # Split into pieces
        chars_per_line = cols//8  # fits well with 0.4 fontsize
        text_rows = [_str[i:i + chars_per_line] for i in range(0, len(_str), chars_per_line)]

        margin = 20
        jump = 20
        for text_row in text_rows:
            cv.putText(img, text_row,
                       (margin, margin + count*jump),
                       cv.FONT_HERSHEY_DUPLEX, 0.4, (255, 255, 255), 1, cv.LINE_AA)
            count += 1

        return img</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="vcd.draw.Image"><code class="flex name class">
<span>class <span class="ident">Image</span></span>
<span>(</span><span>vcd)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Image:
    class Params:
        def __init__(self, _colorMap=None):
            if _colorMap is None:
                self.colorMap = dict()
            else:
                assert (isinstance(_colorMap, dict))
                self.colorMap = _colorMap

    def __init__(self, vcd):
        assert (isinstance(vcd, core.VCD))
        self.vcd = vcd
        self.params = Image.Params()

    def draw_bbox(self, _img, _bbox, _object_class, _color):
        pt1 = (int(round(_bbox[0])), int(round(_bbox[1])))
        pt2 = (int(round(_bbox[0] + _bbox[2])), int(round(_bbox[1] + _bbox[3])))

        pta = (pt1[0], pt1[1] - 15)
        ptb = (pt2[0], pt1[1])

        cv.rectangle(_img, pta, ptb, _color, 2)
        cv.rectangle(_img, pta, ptb, _color, -1)
        cv.putText(_img, _object_class, (pta[0], pta[1] + 10), cv.FONT_HERSHEY_PLAIN, 0.6, (0,0,0), 1, cv.LINE_AA)
        cv.rectangle(_img, pt1, pt2, _color, 2)

    def draw(self, _img, _frameNum, _params=None):
        if _params is not None:
            assert(isinstance(_params, Image.Params))
            self.params = _params

        # Explore objects at VCD
        vcd_frame = self.vcd.get_frame(_frameNum)
        if &#39;objects&#39; in vcd_frame:
            for object_id, object in vcd_frame[&#39;objects&#39;].items():
                # Get object static info
                name = self.vcd.get_object(object_id)[&#39;name&#39;]
                object_class = self.vcd.get_object(object_id)[&#39;type&#39;]

                # Colors
                if self.params.colorMap.get(object_class) is None:
                    # Let&#39;s create a new entry for this class
                    self.params.colorMap[object_class] = (randint(0, 255), randint(0, 255), randint(0, 255))

                # Get current value at this frame
                if &#34;object_data&#34; in object:
                    for object_data_key in object[&#39;object_data&#39;].keys():
                        for object_data_item in object[&#39;object_data&#39;][object_data_key]:
                            if object_data_key == &#34;bbox&#34;:
                                bbox = object_data_item[&#39;val&#39;]
                                self.draw_bbox(_img, bbox, object_class, self.params.colorMap[object_class])</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="vcd.draw.Image.Params"><code class="name">var <span class="ident">Params</span></code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Params:
    &#39;&#39;&#39;
    Assuming cuboids are drawn top view, so Z coordinate is ignored
    RZ is the rotation in Z-axis, it assumes/enforces SY&gt;SX, thus keeping
    RZ between pi/2 and -pi/2

    Z, RX, RY, and SZ are ignored

    For Vehicle cases, we adopt ISO8855: origin at rear axle at ground, x-to-front, y-to-left
    &#39;&#39;&#39;

    def __init__(self, _imgSize=None, _rangeX=None, _rangeY=None, _colorMap=None):
        self.imgSize = (1920, 1080)  # width, height
        if _imgSize is not None:
            assert (isinstance(_imgSize, tuple))
            self.imgSize = _imgSize

        self.ar = self.imgSize[0] / self.imgSize[1]

        self.rangeX = (-80.0, 80.0)
        if _rangeX is not None:
            assert (isinstance(_rangeX, tuple))
            self.rangeX = _rangeX

        self.rangeY = (self.rangeX[0] / self.ar, self.rangeX[1] / self.ar)
        if _rangeY is not None:
            assert (isinstance(_rangeX, tuple))
            self.rangeY = _rangeY

        self.scaleX = self.imgSize[0] / (self.rangeX[1] - self.rangeX[0])
        self.scaleY = -self.imgSize[1] / (self.rangeY[1] - self.rangeY[0])

        self.offsetX = round(-self.rangeX[0] * self.scaleX)
        self.offsetY = round(-self.rangeY[1] * self.scaleY)

        self.stepX = 1.0
        self.stepY = 1.0

        self.gridLinesThickness = 1
        self.backgroundColor = 255
        self.gridTextColor = (0, 0, 0)

        if _colorMap is None:
            self.colorMap = dict()
        else:
            assert (isinstance(_colorMap, dict))
            self.colorMap = _colorMap</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="vcd.draw.Image.draw"><code class="name flex">
<span>def <span class="ident">draw</span></span>(<span>self, _img, _frameNum)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def draw(self, _img, _frameNum, _params=None):
    if _params is not None:
        assert(isinstance(_params, Image.Params))
        self.params = _params

    # Explore objects at VCD
    vcd_frame = self.vcd.get_frame(_frameNum)
    if &#39;objects&#39; in vcd_frame:
        for object_id, object in vcd_frame[&#39;objects&#39;].items():
            # Get object static info
            name = self.vcd.get_object(object_id)[&#39;name&#39;]
            object_class = self.vcd.get_object(object_id)[&#39;type&#39;]

            # Colors
            if self.params.colorMap.get(object_class) is None:
                # Let&#39;s create a new entry for this class
                self.params.colorMap[object_class] = (randint(0, 255), randint(0, 255), randint(0, 255))

            # Get current value at this frame
            if &#34;object_data&#34; in object:
                for object_data_key in object[&#39;object_data&#39;].keys():
                    for object_data_item in object[&#39;object_data&#39;][object_data_key]:
                        if object_data_key == &#34;bbox&#34;:
                            bbox = object_data_item[&#39;val&#39;]
                            self.draw_bbox(_img, bbox, object_class, self.params.colorMap[object_class])</code></pre>
</details>
</dd>
<dt id="vcd.draw.Image.draw_bbox"><code class="name flex">
<span>def <span class="ident">draw_bbox</span></span>(<span>self, _img, _bbox, _object_class, _color)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def draw_bbox(self, _img, _bbox, _object_class, _color):
    pt1 = (int(round(_bbox[0])), int(round(_bbox[1])))
    pt2 = (int(round(_bbox[0] + _bbox[2])), int(round(_bbox[1] + _bbox[3])))

    pta = (pt1[0], pt1[1] - 15)
    ptb = (pt2[0], pt1[1])

    cv.rectangle(_img, pta, ptb, _color, 2)
    cv.rectangle(_img, pta, ptb, _color, -1)
    cv.putText(_img, _object_class, (pta[0], pta[1] + 10), cv.FONT_HERSHEY_PLAIN, 0.6, (0,0,0), 1, cv.LINE_AA)
    cv.rectangle(_img, pt1, pt2, _color, 2)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="vcd.draw.TextDrawer"><code class="flex name class">
<span>class <span class="ident">TextDrawer</span></span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TextDrawer:
    def __init__(self):
        pass

    def draw(self, _str, cols=600, rows=1200):
        img = np.zeros((rows, cols, 3), np.uint8)
        count = 0

        # Split into pieces
        chars_per_line = cols//8  # fits well with 0.4 fontsize
        text_rows = [_str[i:i + chars_per_line] for i in range(0, len(_str), chars_per_line)]

        margin = 20
        jump = 20
        for text_row in text_rows:
            cv.putText(img, text_row,
                       (margin, margin + count*jump),
                       cv.FONT_HERSHEY_DUPLEX, 0.4, (255, 255, 255), 1, cv.LINE_AA)
            count += 1

        return img</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="vcd.draw.TextDrawer.draw"><code class="name flex">
<span>def <span class="ident">draw</span></span>(<span>self, _str, cols=600, rows=1200)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def draw(self, _str, cols=600, rows=1200):
    img = np.zeros((rows, cols, 3), np.uint8)
    count = 0

    # Split into pieces
    chars_per_line = cols//8  # fits well with 0.4 fontsize
    text_rows = [_str[i:i + chars_per_line] for i in range(0, len(_str), chars_per_line)]

    margin = 20
    jump = 20
    for text_row in text_rows:
        cv.putText(img, text_row,
                   (margin, margin + count*jump),
                   cv.FONT_HERSHEY_DUPLEX, 0.4, (255, 255, 255), 1, cv.LINE_AA)
        count += 1

    return img</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="vcd.draw.TopView"><code class="flex name class">
<span>class <span class="ident">TopView</span></span>
<span>(</span><span>vcd)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TopView:
    class Params:
        &#39;&#39;&#39;
        Assuming cuboids are drawn top view, so Z coordinate is ignored
        RZ is the rotation in Z-axis, it assumes/enforces SY&gt;SX, thus keeping
        RZ between pi/2 and -pi/2

        Z, RX, RY, and SZ are ignored

        For Vehicle cases, we adopt ISO8855: origin at rear axle at ground, x-to-front, y-to-left
        &#39;&#39;&#39;

        def __init__(self, _imgSize=None, _rangeX=None, _rangeY=None, _colorMap=None):
            self.imgSize = (1920, 1080)  # width, height
            if _imgSize is not None:
                assert (isinstance(_imgSize, tuple))
                self.imgSize = _imgSize

            self.ar = self.imgSize[0] / self.imgSize[1]

            self.rangeX = (-80.0, 80.0)
            if _rangeX is not None:
                assert (isinstance(_rangeX, tuple))
                self.rangeX = _rangeX

            self.rangeY = (self.rangeX[0] / self.ar, self.rangeX[1] / self.ar)
            if _rangeY is not None:
                assert (isinstance(_rangeX, tuple))
                self.rangeY = _rangeY

            self.scaleX = self.imgSize[0] / (self.rangeX[1] - self.rangeX[0])
            self.scaleY = -self.imgSize[1] / (self.rangeY[1] - self.rangeY[0])

            self.offsetX = round(-self.rangeX[0] * self.scaleX)
            self.offsetY = round(-self.rangeY[1] * self.scaleY)

            self.stepX = 1.0
            self.stepY = 1.0

            self.gridLinesThickness = 1
            self.backgroundColor = 255
            self.gridTextColor = (0, 0, 0)

            if _colorMap is None:
                self.colorMap = dict()
            else:
                assert (isinstance(_colorMap, dict))
                self.colorMap = _colorMap

    def __init__(self, vcd):
        assert(isinstance(vcd, core.VCD))
        self.vcd = vcd
        self.params = TopView.Params()

    def draw(self, frameNum, uid=None, _drawTrajectory=True, _params=None):
        self.topView = None
        if _params is not None:
            assert(isinstance(_params, TopView.Params))
            self.params = _params

        # Base
        self.topView = np.zeros((_params.imgSize[1], _params.imgSize[0], 3), np.uint8)  # Needs to be here
        self.drawTopViewBase(self.topView, self.params)

        # Draw objects
        self.drawObjectsAtFrame(self.topView, self.vcd, uid, frameNum, _drawTrajectory, _params)

        # Draw frame info
        cv.putText(self.topView, &#34;Frame: &#34; + str(frameNum),
                   (_params.imgSize[0] - 100, _params.imgSize[1] - 20),
                   cv.FONT_HERSHEY_PLAIN, 1.0, (0,0,0), 1, cv.LINE_AA)

        return self.topView

    def drawEgoCar(self, _topView, size, wheelbase):
        cuboid = [wheelbase/2, 0, 0, 0, 0, 0, size[0], size[1], size[2]]
        self.drawCuboidTopView(_topView, cuboid, &#34;&#34;, (0, 0, 0), 3)
        self.drawCuboidTopView(_topView, cuboid, &#34;&#34;, (127, 127, 127), 2)

    def drawTopViewBase(self, _topView, _params):

        _topView.fill(_params.backgroundColor)

        # Grid x (1/2)
        for x in np.arange(_params.rangeX[0], _params.rangeX[1] + _params.stepX, _params.stepX):
            x_round = round(x)
            ptImg1 = self.point2Pixel((x_round, _params.rangeY[0]))
            ptImg2 = self.point2Pixel((x_round, _params.rangeY[1]))
            cv.line(_topView, ptImg1, ptImg2, (127, 127, 127), _params.gridLinesThickness)

        # Grid y (1/2)
        for y in np.arange(_params.rangeY[0], _params.rangeY[1] + _params.stepY, _params.stepY):
            y_round = round(y)
            ptImg1 = self.point2Pixel((_params.rangeX[0], y_round))
            ptImg2 = self.point2Pixel((_params.rangeX[1], y_round))
            cv.line(_topView, ptImg1, ptImg2, (127, 127, 127), _params.gridLinesThickness)

        # Grid x (2/2)
        for x in np.arange(_params.rangeX[0], _params.rangeX[1] + _params.stepX, _params.stepX):
            x_round = round(x)
            ptImg1 = self.point2Pixel((x_round, _params.rangeY[0]))
            cv.putText(_topView, str(round(x)) + &#34; m&#34;, (ptImg1[0] + 5, 15), cv.FONT_HERSHEY_PLAIN,
                       0.6, _params.gridTextColor, 1, cv.LINE_AA)
        # Grid y (2/2)
        for y in np.arange(_params.rangeY[0], _params.rangeY[1] + _params.stepY, _params.stepY):
            y_round = round(y)
            ptImg1 = self.point2Pixel((_params.rangeX[0], y_round))
            cv.putText(_topView, str(round(y)) + &#34; m&#34;, (5, ptImg1[1] - 5),
                       cv.FONT_HERSHEY_PLAIN,
                       0.6, _params.gridTextColor, 1, cv.LINE_AA)

        # World origin
        cv.circle(_topView, self.point2Pixel((0.0, 0.0)), 4, (255, 255, 255), -1)
        cv.line(_topView, self.point2Pixel((0.0, 0.0)), self.point2Pixel((5.0, 0.0)), (0, 0, 255), 2)
        cv.line(_topView, self.point2Pixel((0.0, 0.0)), self.point2Pixel((0.0, 5.0)), (0, 255, 0), 2)

        cv.putText(_topView, &#34;X&#34;, self.point2Pixel((5.0, -0.5)), cv.FONT_HERSHEY_PLAIN, 1.0, (0, 0, 255), 1, cv.LINE_AA)
        cv.putText(_topView, &#34;Y&#34;, self.point2Pixel((-1.0, 5.0)), cv.FONT_HERSHEY_PLAIN, 1.0, (0, 255, 0), 1, cv.LINE_AA)

    def drawCuboidTopView(self, _img, _cuboid, _class, _color, _thick, _ID=&#34;&#34;):
        assert(isinstance(_cuboid, list))
        assert(len(_cuboid) == 9)  # (X, Y, Z, RX, RY, RZ, SX, SY, SZ)

        locX = _cuboid[0]
        locY = _cuboid[1]
        rotZ_rad = _cuboid[5]
        #if rotZ_rad &gt; np.pi/2 or rotZ_rad &lt; -np.pi/2:
            # Can&#39;t paint this cuboid (this condition enforces sy&gt;sx)
        #    return
        rotZ_deg = rotZ_rad * 180 / np.pi
        sizeX = _cuboid[6]
        sizeY = _cuboid[7]

        center = (locX, locY)
        size = (sizeX, sizeY)

        center_pix = self.point2Pixel(center)
        size_pix = self.size2Pixel(size)

        rrect = (center_pix, size_pix, rotZ_deg)
        box = cv.boxPoints(rrect)
        box = np.int0(box)

        cv.drawContours(_img, [box], 0, _color, _thick)

    def drawObjectsAtFrame(self, _img, _vcd, uid, _frameNum, _drawTrajectory, _params):
        assert(isinstance(_vcd, core.VCD))

        # Explore objects at VCD
        vcd_frame = _vcd.get_frame(_frameNum)
        if &#39;objects&#39; in vcd_frame:
            for object_id, object in vcd_frame[&#39;objects&#39;].items():
                if uid is not None:
                    if object_id != uid:
                        continue
                # Get object static info
                name = _vcd.get_object(object_id)[&#39;name&#39;]
                object_class = _vcd.get_object(object_id)[&#39;type&#39;]

                # Colors
                if self.params.colorMap.get(object_class) is None:
                    # Let&#39;s create a new entry for this class
                    self.params.colorMap[object_class] = (randint(0, 255), randint(0, 255), randint(0, 255))

                # Get current value at this frame
                hasCuboid = False
                if &#34;object_data&#34; in object:
                    for object_data_key in object[&#39;object_data&#39;].keys():
                        for object_data_item in object[&#39;object_data&#39;][object_data_key]:
                            if object_data_key == &#34;cuboid&#34;:
                                hasCuboid = True
                                cuboid = object_data_item[&#39;val&#39;]
                                self.drawCuboidTopView(_img,
                                                       cuboid,
                                                       object_class,
                                                       self.params.colorMap[object_class],
                                                       2,
                                                       object_id)

                if _drawTrajectory and hasCuboid:
                    fis = _vcd.get_frame_intervals_of_element(core.ElementType.object, object_id)
                    for fi in fis:
                        prev_center = dict()
                        for f in range(fi[&#39;frame_start&#39;], _frameNum + 1):
                            vcd_other_frame = _vcd.get_frame(f)
                            if &#39;objects&#39; in vcd_other_frame:
                                for object_id_this, object in vcd_other_frame[&#39;objects&#39;].items():
                                    if object_id_this is not object_id:
                                        continue

                                    # Get value at this frame
                                    if &#34;object_data&#34; in object:
                                        for object_data_key in object[&#39;object_data&#39;].keys():
                                            for object_data_item in object[&#39;object_data&#39;][object_data_key]:
                                                if object_data_key == &#34;cuboid&#34;:
                                                    cuboid = object_data_item[&#39;val&#39;]
                                                    name = object_data_item[&#39;name&#39;]

                                                    center = (cuboid[0], cuboid[1])
                                                    center_pix = self.point2Pixel(center)

                                                    # this is a dict to allow multiple trajectories
                                                    # (e.g. several cuboids per object)
                                                    if prev_center.get(name) is not None:
                                                        cv.line(_img, prev_center[name], center_pix, (0,0,0),
                                                                1, cv.LINE_AA)

                                                    cv.circle(_img, center_pix, 2,
                                                                  self.params.colorMap[object_class], -1)

                                                    prev_center[name] = center_pix

    def size2Pixel(self, _size):
        return (int(round(_size[0] * abs(self.params.scaleX))),
                int(round(_size[1] * abs(self.params.scaleY))))

    def point2Pixel(self, _point):
        pixel = (int(round(_point[0]*self.params.scaleX + self.params.offsetX)),
                 int(round(_point[1]*self.params.scaleY + self.params.offsetY)))
        return pixel</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="vcd.draw.TopView.Params"><code class="name">var <span class="ident">Params</span></code></dt>
<dd>
<section class="desc"><p>Assuming cuboids are drawn top view, so Z coordinate is ignored
RZ is the rotation in Z-axis, it assumes/enforces SY&gt;SX, thus keeping
RZ between pi/2 and -pi/2</p>
<p>Z, RX, RY, and SZ are ignored</p>
<p>For Vehicle cases, we adopt ISO8855: origin at rear axle at ground, x-to-front, y-to-left</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Params:
    &#39;&#39;&#39;
    Assuming cuboids are drawn top view, so Z coordinate is ignored
    RZ is the rotation in Z-axis, it assumes/enforces SY&gt;SX, thus keeping
    RZ between pi/2 and -pi/2

    Z, RX, RY, and SZ are ignored

    For Vehicle cases, we adopt ISO8855: origin at rear axle at ground, x-to-front, y-to-left
    &#39;&#39;&#39;

    def __init__(self, _imgSize=None, _rangeX=None, _rangeY=None, _colorMap=None):
        self.imgSize = (1920, 1080)  # width, height
        if _imgSize is not None:
            assert (isinstance(_imgSize, tuple))
            self.imgSize = _imgSize

        self.ar = self.imgSize[0] / self.imgSize[1]

        self.rangeX = (-80.0, 80.0)
        if _rangeX is not None:
            assert (isinstance(_rangeX, tuple))
            self.rangeX = _rangeX

        self.rangeY = (self.rangeX[0] / self.ar, self.rangeX[1] / self.ar)
        if _rangeY is not None:
            assert (isinstance(_rangeX, tuple))
            self.rangeY = _rangeY

        self.scaleX = self.imgSize[0] / (self.rangeX[1] - self.rangeX[0])
        self.scaleY = -self.imgSize[1] / (self.rangeY[1] - self.rangeY[0])

        self.offsetX = round(-self.rangeX[0] * self.scaleX)
        self.offsetY = round(-self.rangeY[1] * self.scaleY)

        self.stepX = 1.0
        self.stepY = 1.0

        self.gridLinesThickness = 1
        self.backgroundColor = 255
        self.gridTextColor = (0, 0, 0)

        if _colorMap is None:
            self.colorMap = dict()
        else:
            assert (isinstance(_colorMap, dict))
            self.colorMap = _colorMap</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="vcd.draw.TopView.draw"><code class="name flex">
<span>def <span class="ident">draw</span></span>(<span>self, frameNum, uid=None)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def draw(self, frameNum, uid=None, _drawTrajectory=True, _params=None):
    self.topView = None
    if _params is not None:
        assert(isinstance(_params, TopView.Params))
        self.params = _params

    # Base
    self.topView = np.zeros((_params.imgSize[1], _params.imgSize[0], 3), np.uint8)  # Needs to be here
    self.drawTopViewBase(self.topView, self.params)

    # Draw objects
    self.drawObjectsAtFrame(self.topView, self.vcd, uid, frameNum, _drawTrajectory, _params)

    # Draw frame info
    cv.putText(self.topView, &#34;Frame: &#34; + str(frameNum),
               (_params.imgSize[0] - 100, _params.imgSize[1] - 20),
               cv.FONT_HERSHEY_PLAIN, 1.0, (0,0,0), 1, cv.LINE_AA)

    return self.topView</code></pre>
</details>
</dd>
<dt id="vcd.draw.TopView.drawCuboidTopView"><code class="name flex">
<span>def <span class="ident">drawCuboidTopView</span></span>(<span>self, _img, _cuboid, _class, _color, _thick)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def drawCuboidTopView(self, _img, _cuboid, _class, _color, _thick, _ID=&#34;&#34;):
    assert(isinstance(_cuboid, list))
    assert(len(_cuboid) == 9)  # (X, Y, Z, RX, RY, RZ, SX, SY, SZ)

    locX = _cuboid[0]
    locY = _cuboid[1]
    rotZ_rad = _cuboid[5]
    #if rotZ_rad &gt; np.pi/2 or rotZ_rad &lt; -np.pi/2:
        # Can&#39;t paint this cuboid (this condition enforces sy&gt;sx)
    #    return
    rotZ_deg = rotZ_rad * 180 / np.pi
    sizeX = _cuboid[6]
    sizeY = _cuboid[7]

    center = (locX, locY)
    size = (sizeX, sizeY)

    center_pix = self.point2Pixel(center)
    size_pix = self.size2Pixel(size)

    rrect = (center_pix, size_pix, rotZ_deg)
    box = cv.boxPoints(rrect)
    box = np.int0(box)

    cv.drawContours(_img, [box], 0, _color, _thick)</code></pre>
</details>
</dd>
<dt id="vcd.draw.TopView.drawEgoCar"><code class="name flex">
<span>def <span class="ident">drawEgoCar</span></span>(<span>self, _topView, size, wheelbase)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def drawEgoCar(self, _topView, size, wheelbase):
    cuboid = [wheelbase/2, 0, 0, 0, 0, 0, size[0], size[1], size[2]]
    self.drawCuboidTopView(_topView, cuboid, &#34;&#34;, (0, 0, 0), 3)
    self.drawCuboidTopView(_topView, cuboid, &#34;&#34;, (127, 127, 127), 2)</code></pre>
</details>
</dd>
<dt id="vcd.draw.TopView.drawObjectsAtFrame"><code class="name flex">
<span>def <span class="ident">drawObjectsAtFrame</span></span>(<span>self, _img, _vcd, uid, _frameNum, _drawTrajectory, _params)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def drawObjectsAtFrame(self, _img, _vcd, uid, _frameNum, _drawTrajectory, _params):
    assert(isinstance(_vcd, core.VCD))

    # Explore objects at VCD
    vcd_frame = _vcd.get_frame(_frameNum)
    if &#39;objects&#39; in vcd_frame:
        for object_id, object in vcd_frame[&#39;objects&#39;].items():
            if uid is not None:
                if object_id != uid:
                    continue
            # Get object static info
            name = _vcd.get_object(object_id)[&#39;name&#39;]
            object_class = _vcd.get_object(object_id)[&#39;type&#39;]

            # Colors
            if self.params.colorMap.get(object_class) is None:
                # Let&#39;s create a new entry for this class
                self.params.colorMap[object_class] = (randint(0, 255), randint(0, 255), randint(0, 255))

            # Get current value at this frame
            hasCuboid = False
            if &#34;object_data&#34; in object:
                for object_data_key in object[&#39;object_data&#39;].keys():
                    for object_data_item in object[&#39;object_data&#39;][object_data_key]:
                        if object_data_key == &#34;cuboid&#34;:
                            hasCuboid = True
                            cuboid = object_data_item[&#39;val&#39;]
                            self.drawCuboidTopView(_img,
                                                   cuboid,
                                                   object_class,
                                                   self.params.colorMap[object_class],
                                                   2,
                                                   object_id)

            if _drawTrajectory and hasCuboid:
                fis = _vcd.get_frame_intervals_of_element(core.ElementType.object, object_id)
                for fi in fis:
                    prev_center = dict()
                    for f in range(fi[&#39;frame_start&#39;], _frameNum + 1):
                        vcd_other_frame = _vcd.get_frame(f)
                        if &#39;objects&#39; in vcd_other_frame:
                            for object_id_this, object in vcd_other_frame[&#39;objects&#39;].items():
                                if object_id_this is not object_id:
                                    continue

                                # Get value at this frame
                                if &#34;object_data&#34; in object:
                                    for object_data_key in object[&#39;object_data&#39;].keys():
                                        for object_data_item in object[&#39;object_data&#39;][object_data_key]:
                                            if object_data_key == &#34;cuboid&#34;:
                                                cuboid = object_data_item[&#39;val&#39;]
                                                name = object_data_item[&#39;name&#39;]

                                                center = (cuboid[0], cuboid[1])
                                                center_pix = self.point2Pixel(center)

                                                # this is a dict to allow multiple trajectories
                                                # (e.g. several cuboids per object)
                                                if prev_center.get(name) is not None:
                                                    cv.line(_img, prev_center[name], center_pix, (0,0,0),
                                                            1, cv.LINE_AA)

                                                cv.circle(_img, center_pix, 2,
                                                              self.params.colorMap[object_class], -1)

                                                prev_center[name] = center_pix</code></pre>
</details>
</dd>
<dt id="vcd.draw.TopView.drawTopViewBase"><code class="name flex">
<span>def <span class="ident">drawTopViewBase</span></span>(<span>self, _topView, _params)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def drawTopViewBase(self, _topView, _params):

    _topView.fill(_params.backgroundColor)

    # Grid x (1/2)
    for x in np.arange(_params.rangeX[0], _params.rangeX[1] + _params.stepX, _params.stepX):
        x_round = round(x)
        ptImg1 = self.point2Pixel((x_round, _params.rangeY[0]))
        ptImg2 = self.point2Pixel((x_round, _params.rangeY[1]))
        cv.line(_topView, ptImg1, ptImg2, (127, 127, 127), _params.gridLinesThickness)

    # Grid y (1/2)
    for y in np.arange(_params.rangeY[0], _params.rangeY[1] + _params.stepY, _params.stepY):
        y_round = round(y)
        ptImg1 = self.point2Pixel((_params.rangeX[0], y_round))
        ptImg2 = self.point2Pixel((_params.rangeX[1], y_round))
        cv.line(_topView, ptImg1, ptImg2, (127, 127, 127), _params.gridLinesThickness)

    # Grid x (2/2)
    for x in np.arange(_params.rangeX[0], _params.rangeX[1] + _params.stepX, _params.stepX):
        x_round = round(x)
        ptImg1 = self.point2Pixel((x_round, _params.rangeY[0]))
        cv.putText(_topView, str(round(x)) + &#34; m&#34;, (ptImg1[0] + 5, 15), cv.FONT_HERSHEY_PLAIN,
                   0.6, _params.gridTextColor, 1, cv.LINE_AA)
    # Grid y (2/2)
    for y in np.arange(_params.rangeY[0], _params.rangeY[1] + _params.stepY, _params.stepY):
        y_round = round(y)
        ptImg1 = self.point2Pixel((_params.rangeX[0], y_round))
        cv.putText(_topView, str(round(y)) + &#34; m&#34;, (5, ptImg1[1] - 5),
                   cv.FONT_HERSHEY_PLAIN,
                   0.6, _params.gridTextColor, 1, cv.LINE_AA)

    # World origin
    cv.circle(_topView, self.point2Pixel((0.0, 0.0)), 4, (255, 255, 255), -1)
    cv.line(_topView, self.point2Pixel((0.0, 0.0)), self.point2Pixel((5.0, 0.0)), (0, 0, 255), 2)
    cv.line(_topView, self.point2Pixel((0.0, 0.0)), self.point2Pixel((0.0, 5.0)), (0, 255, 0), 2)

    cv.putText(_topView, &#34;X&#34;, self.point2Pixel((5.0, -0.5)), cv.FONT_HERSHEY_PLAIN, 1.0, (0, 0, 255), 1, cv.LINE_AA)
    cv.putText(_topView, &#34;Y&#34;, self.point2Pixel((-1.0, 5.0)), cv.FONT_HERSHEY_PLAIN, 1.0, (0, 255, 0), 1, cv.LINE_AA)</code></pre>
</details>
</dd>
<dt id="vcd.draw.TopView.point2Pixel"><code class="name flex">
<span>def <span class="ident">point2Pixel</span></span>(<span>self, _point)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def point2Pixel(self, _point):
    pixel = (int(round(_point[0]*self.params.scaleX + self.params.offsetX)),
             int(round(_point[1]*self.params.scaleY + self.params.offsetY)))
    return pixel</code></pre>
</details>
</dd>
<dt id="vcd.draw.TopView.size2Pixel"><code class="name flex">
<span>def <span class="ident">size2Pixel</span></span>(<span>self, _size)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def size2Pixel(self, _size):
    return (int(round(_size[0] * abs(self.params.scaleX))),
            int(round(_size[1] * abs(self.params.scaleY))))</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="vcd" href="index.html">vcd</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="vcd.draw.Image" href="#vcd.draw.Image">Image</a></code></h4>
<ul class="">
<li><code><a title="vcd.draw.Image.Params" href="#vcd.draw.Image.Params">Params</a></code></li>
<li><code><a title="vcd.draw.Image.draw" href="#vcd.draw.Image.draw">draw</a></code></li>
<li><code><a title="vcd.draw.Image.draw_bbox" href="#vcd.draw.Image.draw_bbox">draw_bbox</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="vcd.draw.TextDrawer" href="#vcd.draw.TextDrawer">TextDrawer</a></code></h4>
<ul class="">
<li><code><a title="vcd.draw.TextDrawer.draw" href="#vcd.draw.TextDrawer.draw">draw</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="vcd.draw.TopView" href="#vcd.draw.TopView">TopView</a></code></h4>
<ul class="two-column">
<li><code><a title="vcd.draw.TopView.Params" href="#vcd.draw.TopView.Params">Params</a></code></li>
<li><code><a title="vcd.draw.TopView.draw" href="#vcd.draw.TopView.draw">draw</a></code></li>
<li><code><a title="vcd.draw.TopView.drawCuboidTopView" href="#vcd.draw.TopView.drawCuboidTopView">drawCuboidTopView</a></code></li>
<li><code><a title="vcd.draw.TopView.drawEgoCar" href="#vcd.draw.TopView.drawEgoCar">drawEgoCar</a></code></li>
<li><code><a title="vcd.draw.TopView.drawObjectsAtFrame" href="#vcd.draw.TopView.drawObjectsAtFrame">drawObjectsAtFrame</a></code></li>
<li><code><a title="vcd.draw.TopView.drawTopViewBase" href="#vcd.draw.TopView.drawTopViewBase">drawTopViewBase</a></code></li>
<li><code><a title="vcd.draw.TopView.point2Pixel" href="#vcd.draw.TopView.point2Pixel">point2Pixel</a></code></li>
<li><code><a title="vcd.draw.TopView.size2Pixel" href="#vcd.draw.TopView.size2Pixel">size2Pixel</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.4</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>